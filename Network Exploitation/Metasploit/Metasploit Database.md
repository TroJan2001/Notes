
Sometimes we may need to deal with several targets, if say so we would need to engage and know how to deal with databases.

Metasploit has a database function to simplify project management and avoid possible confusion when setting up parameter values.

# Useful Commands:

First we need to start the PostgreSQL database -basically runs on port 5432- which will be used by Metasploit with the following command:

```bash
sudo systemctl start postgresql
```

Also, we must initialize the Metasploit Database using the following command:

```bash
sudo msfdb init
```

After launching the `msfconsole` we can check the database status using the following command:

```msfconsole
db_status
```

To isolate different projects the database will allow us to create workspaces. To list the workspaces we can the following command:

```msfconsole
workspace
```

we can use `workspace -h` for more information about the workspace command.

**Important Note:** Different from regular Metasploit usage, once Metasploit is launched with a database, the `help` command, you will show the Database Backends Commands menu.

The `hosts -h` and `services -h` commands can help you become more familiar with available options. 

Once the host information is stored in the database, you can use the `hosts -R` command to add this value to the RHOSTS parameter.

If there is more than one host saved to the database, all IP addresses will be used when the `hosts -R` command is used.   

In a typical penetration testing engagement, we could have the following scenario: 

- Finding available hosts using the `db_nmap` command
- Scanning these for further vulnerabilities or open ports (using a port scanning module) 

The services command used with the `-S` parameter will allow you to search for specific services in the environment as follows:
```msfconsole
services -S <service name>
```

You may want to look for low-hanging fruits such as:

- HTTP: Could potentially host a web application where you can find vulnerabilities like SQL injection or Remote Code Execution (RCE). 
- FTP: Could allow anonymous login and provide access to interesting files. 
- SMB: Could be vulnerable to SMB exploits like MS17-010
- SSH: Could have default or easy to guess credentials
- RDP: Could be vulnerable to Bluekeep or allow desktop access if weak credentials were used.

